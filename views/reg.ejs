<!DOCTYPE html>
<html>
  <head>
  	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>psv小清新</title>
	<link rel="stylesheet"  href="/stylesheets/jquery.mobile-1.3.0.css">
	<link rel="stylesheet" href="/stylesheets/jqm-demos.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<link rel="stylesheet" href="/stylesheets/grid-listview.css">
	<script src="/javascripts/jquery.js"></script>
	<script src="/javascripts/jqm-demos.js"></script>
	<script src="/javascripts/jquery.mobile-1.3.0.js"></script>
    
    
  </head>
  <body>
     <div data-role="page" id="demo-page" data-theme="c" >

    <div data-role="header" data-theme="a" data-position="fixed">
        <a href="#" id="back" data-role="button" data-icon="back" data-iconpos="notext" data-theme="a" data-inline="true">Back</a>
       
        <h1>注册</h1>
        <a href="/"  data-ajax="false"  data-role="button" data-icon="home" data-iconpos="notext" data-theme="a" data-inline="true">Back</a>
    </div><!-- /header -->

    <div data-role="content">
        
             <label for="text-basic">用户名:</label>
             <input type="text" name="username" id="username" value="">
             <label for="password">密码:</label>
             <input type="password" name="password" id="password" value="" autocomplete="off">   
             <label for="password">确认密码:</label>
             <input type="password"  id="password_con" value="" autocomplete="off">   
             <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true" >
                <legend>性别:</legend>
                <input type="checkbox" name="sex1"  id="checkbox-6" value="off" >
                <label for="checkbox-6">男</label>
                <input type="checkbox" name="sex2" id="checkbox-7" value="off">
                <label for="checkbox-7">女</label>
            </fieldset>
             <button id="submit" data-theme="a">确认</button>
         
        
    </div><!-- /content -->
     <div data-role="popup" id="userNull_popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
          <div data-role="header" data-theme="a" class="ui-corner-top">
              <h1>...</h1>
          </div>
          <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
              <h3 class="ui-title">请输入用户名奥，亲</h3>
             
              <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">本页</a>
              <a href="/" data-ajax="false"   data-role="button" data-inline="true"  data-transition="flow" data-theme="b">首页</a>
          </div>
      </div>
    <!--  <div data-role="popup" id="pwdNull_popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
          <div data-role="header" data-theme="a" class="ui-corner-top">
              <h1>...</h1>
          </div>
          <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
              <h3 class="ui-title">请输入密码，亲</h3>
             
              <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">本页</a>
              <a href="/" data-ajax="false"   data-role="button" data-inline="true"  data-transition="flow" data-theme="b">首页</a>
          </div>
      </div>
     <div data-role="popup" id="succ_popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
          <div data-role="header" data-theme="a" class="ui-corner-top">
              <h1>恭喜</h1>
          </div>
          <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
              <h3 class="ui-title">可以发表评论内容了</h3>
             
              <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">本页</a>
              <a href="/" data-ajax="false"   data-role="button" data-inline="true"  data-transition="flow" data-theme="b">首页</a>
          </div>
      </div>
      <div data-role="popup" id="fail_popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
          <div data-role="header" data-theme="a" class="ui-corner-top">
              <h1>sorry啦</h1>
          </div>
          <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
              <h3 class="ui-title">我承认我有错</h3>
             
              <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">本页</a>
              <a href="/" data-ajax="false"   data-role="button" data-inline="true"  data-transition="flow" data-theme="b">首页</a>
          </div>
      </div>
       <div data-role="popup" id="Repeat_popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
          <div data-role="header" data-theme="a" class="ui-corner-top">
              <h1>呀呀呀呀</h1>
          </div>
          <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
              <h3 class="ui-title">用户名重复</h3>
             
              <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">本页</a>
              <a href="/"   data-ajax="false" data-role="button" data-inline="true"  data-transition="flow" data-theme="b">首页</a>
          </div>
      </div>-->
    <script type="text/javascript">
            $(function(){
                $("#back").click(function(){
                       //console.log("back page");
                      window.history.go(-1);
                });
                var check_index=0;
                $("#checkbox-6").click(function(){
                   
                    if(check_index%2==0){
                       $(this).val("on");
                    }else{
                        $(this).val("off");
                    }
                    check_index+=1;
                });
                var check_indexNv=0;
                $("#checkbox-7").click(function(){
                   if(check_indexNv%2==0){
                       $(this).val("on");
                    }else{
                        $(this).val("off");
                    }
                    check_indexNv+=1;
                });
               $("#submit").click(function(){
                
                      var username=$("#username").val();
                      if(username==''){
                      
                        $("#userNull_popupDialog h1").html("<font color='#B619DD'>Error</font> ");
                        
                        $("#userNull_popupDialog h3").html("请输入名字，亲");
                        $("#userNull_popupDialog").popup("open");
                        console.log("你难道忘记自己名字了吗");
                        return false;
                      }
                      var pwd=$("#password").val();
                      var pwd_con=$("#password_con").val();
                      if(pwd==''){
                        
                        $("#userNull_popupDialog h1").html("<font color='#B619DD'>Error</font> ");
                        
                        $("#userNull_popupDialog h3").html("请输入密码，亲");
                        $("#userNull_popupDialog").popup("open");
                        return false;
                      }
                      if(pwd!=pwd_con&&pwd!=''){
                        $("#userNull_popupDialog h1").html("<font color='#B619DD'>Error</font> ");
                        
                        $("#userNull_popupDialog h3").html("请检查密码，亲");
                        $("#userNull_popupDialog").popup("open");
                        console.log("哥们儿，密码不对啊");
                        return false;
                      }
                      
                      var sex1=$("#checkbox-6").val();
                      var sex2=$("#checkbox-7").val();
                      if(sex1=='off'&&sex2=='off'){
                        $("#userNull_popupDialog h1").html("<font color='#B619DD'>Error</font> ");
                        
                        $("#userNull_popupDialog h3").html("请选择性别，亲");
                        $("#userNull_popupDialog").popup("open");
                        console.log("可以选择双性别奥,亲");
                        return false;
                      }
                      var seria="username="+username+"&password="+pwd+"&sex1="+sex1+"&sex2="+sex2;
                      $.post('/reg',{username:username,password:pwd,sex1:sex1,sex2:sex2},function(data){
                          var code=data.rescode;
                              
                                if(code=='200'){
                                  $("#userNull_popupDialog h1").html("<font color='green'>OK</font> ");
                        
                                  $("#userNull_popupDialog h3").html("可以发表评论内容了，亲");
                                  $("#userNull_popupDialog").popup("open");
                                }else if(code=='500'){
                                   $("#userNull_popupDialog h1").html("<font color='#B619DD'>Server Error</font> ");
                        
                                  $("#userNull_popupDialog h3").html("偶挂了");
                                  $("#userNull_popupDialog").popup("open");
                                }else if(code='400'){
                                     $("#userNull_popupDialog h1").html("<font color='#B619DD'>Error</font> ");
                        
                                  $("#userNull_popupDialog h3").html("换一个用户名吧，亲");
                                  $("#userNull_popupDialog").popup("open");
                                }
                      });
                       
                      
               });
            });
       
    </script>
     
</div><!-- /page -->
  </body>
</html>